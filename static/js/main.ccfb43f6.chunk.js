(this["webpackJsonpsnapchat-clone"]=this["webpackJsonpsnapchat-clone"]||[]).push([[0],{106:function(e,c,t){},107:function(e,c,t){},108:function(e,c,t){},109:function(e,c,t){},110:function(e,c,t){"use strict";t.r(c);var a=t(0),n=t.n(a),s=t(24),i=t.n(s),r=(t(77),t(31)),o=t(5),l=(t(78),t(54)),j=t.n(l),u=t(45),d=t.n(u),b=t(6),m=t(34),h=Object(m.b)({name:"camera",initialState:{cameraImage:null},reducers:{setCameraImage:function(e,c){e.cameraImage=c.payload},resetCameraImage:function(e){e.cameraImage=null}}}),p=h.actions,O=p.setCameraImage,f=p.resetCameraImage,x=function(e){return e.camera.cameraImage},g=h.reducer,v=(t(84),t(2)),_=250,w=400;var I=function(){var e=Object(a.useRef)(null),c=Object(b.b)(),t=Object(o.f)(),n=Object(a.useCallback)((function(){var a=e.current.getScreenshot();c(O(a)),t.push("/preview")}),[e]);return Object(v.jsxs)("div",{className:"webcamCapture",children:[Object(v.jsx)(j.a,{audio:!1,height:w,ref:e,screenshotFormat:"image/jpeg",width:_}),Object(v.jsx)(d.a,{className:"webcamCapture__button",onClick:n,fontSize:"large"})]})},N=(t(90),t(57)),C=t.n(N),k=t(58),S=t.n(k),y=t(59),P=t.n(y),U=t(60),z=t.n(U),B=t(61),R=t.n(B),A=t(62),D=t.n(A),E=t(63),T=t.n(E),F=t(64),V=t.n(F),W=t(65),J=t.n(W),L=t(130),G=t(30),H=t.n(G),M=H.a.initializeApp({apiKey:"AIzaSyDVkbYPQigGrHhH5klO2BgyJaMwdyRhwPY",authDomain:"snapchat-clone-7c3a8.firebaseapp.com",projectId:"snapchat-clone-7c3a8",storageBucket:"snapchat-clone-7c3a8.appspot.com",messagingSenderId:"593951720237",appId:"1:593951720237:web:a69e21a2036325e67a09a4"}).firestore(),Y=H.a.auth(),K=H.a.storage(),Q=new H.a.auth.GoogleAuthProvider,$=Object(m.b)({name:"app",initialState:{user:null,selectedImage:null},reducers:{login:function(e,c){e.user=c.payload},logout:function(e){e.user=null},selectImage:function(e,c){e.selectedImage=c.payload},resetImage:function(e){e.selectedImage=null}}}),q=$.actions,X=q.login,Z=q.logout,ee=q.selectImage,ce=(q.reserImage,function(e){return e.app.user}),te=function(e){return e.app.selectedImage},ae=$.reducer;var ne=function(){var e=Object(b.c)(x),c=Object(o.f)(),t=Object(b.b)(),n=Object(b.c)(ce);return Object(a.useEffect)((function(){e||c.replace("/")}),[e,c]),Object(v.jsxs)("div",{className:"preview",children:[Object(v.jsx)(C.a,{className:"preview__close",onClick:function(){t(f())}}),Object(v.jsxs)("div",{className:"preview__toolbarRight",children:[Object(v.jsx)(S.a,{}),Object(v.jsx)(P.a,{}),Object(v.jsx)(z.a,{}),Object(v.jsx)(R.a,{}),Object(v.jsx)(D.a,{}),Object(v.jsx)(T.a,{}),Object(v.jsx)(V.a,{})]}),Object(v.jsx)("img",{src:e,alt:""}),Object(v.jsxs)("div",{onClick:function(){var t=Object(L.a)();K.ref("posts/".concat(t)).putString(e,"data_url").on("state_changed",null,(function(e){console.log(e)}),(function(){K.ref("posts").child(t).getDownloadURL().then((function(e){M.collection("posts").add({imageUrl:e,username:n.username,read:!1,profilePic:n.profilePic,timestamp:H.a.firestore.FieldValue.serverTimestamp()}),c.replace("/chats")}))}))},className:"preview__footer",children:[Object(v.jsx)("h2",{children:"Send Now"}),Object(v.jsx)(J.a,{className:"preview_sendIcon",fontSize:"small"})]})]})},se=t(29),ie=t(131),re=(t(106),t(67)),oe=t.n(re),le=t(68),je=t.n(le),ue=(t(107),t(66)),de=t.n(ue),be=t(70);var me=function(e){var c=e.id,t=e.profilePic,a=e.username,n=e.timestamp,s=e.imageUrl,i=e.read,r=Object(b.b)(),l=Object(o.f)();return Object(v.jsxs)("div",{onClick:function(){i||(r(ee(s)),M.collection("posts").doc(c).update({read:!0}),l.push("/chats/view"))},className:"chat",children:[Object(v.jsx)(ie.a,{className:"chat__avatar",src:t}),Object(v.jsxs)("div",{className:"chat__info",children:[Object(v.jsx)("h4",{children:a}),Object(v.jsxs)("p",{children:[!i&&"Tap to view - "," ",Object(v.jsx)(be.a,{date:new Date(null===n||void 0===n?void 0:n.toDate()).toUTCString()})]})]}),!i&&Object(v.jsx)(de.a,{className:"chat__readIcon"})]})};var he=function(){var e=Object(a.useState)([]),c=Object(se.a)(e,2),t=c[0],n=c[1],s=Object(b.c)(ce),i=Object(b.b)(),r=Object(o.f)();return Object(a.useEffect)((function(){M.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(v.jsxs)("div",{className:"chats",children:[Object(v.jsxs)("div",{className:"chats__header",children:[Object(v.jsx)(ie.a,{src:s.profilePic,onClick:function(){return Y.signOut()},className:"chats__avatar"}),Object(v.jsxs)("div",{className:"chats__search",children:[Object(v.jsx)(oe.a,{className:"chats__searchIcon"}),Object(v.jsx)("input",{placeholder:"Friends",type:"text"})]}),Object(v.jsx)(je.a,{className:"chats_chatIcon"})]}),Object(v.jsx)("div",{className:"chats__posts",children:t.map((function(e){var c=e.id,t=e.data,a=t.profilePic,n=t.username,s=t.timestamp,i=t.imageUrl,r=t.read;return Object(v.jsx)(me,{id:c,profilePic:a,username:n,timestamp:s,imageUrl:i,read:r},c)}))}),Object(v.jsx)(d.a,{className:"chats_takePicIcon",onClick:function(){i(f()),r.replace("/")},fontSize:"large"})]})},pe=t(69);t(108);var Oe=function(){var e=Object(b.c)(te),c=Object(o.f)();Object(a.useEffect)((function(){e||t()}),[e]);var t=function(){c.replace("/chats")};return Object(v.jsxs)("div",{className:"chatView",children:[Object(v.jsx)("img",{src:e,onClick:t,alt:""}),Object(v.jsx)("div",{className:"chatView__timer",children:Object(v.jsx)(pe.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:6,size:34,colors:[["#004777",.33],["#F7B801",.33],["#A30000",.33]],children:function(e){var c=e.remainingTime;return 0===c&&t(),c}})})]})},fe=t(129);t(109);var xe=function(){var e=Object(b.b)();return Object(v.jsx)("div",{className:"login",children:Object(v.jsxs)("div",{className:"login__container",children:[Object(v.jsx)("img",{src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(v.jsx)(fe.a,{variant:"outlined",onClick:function(){Y.signInWithPopup(Q).then((function(c){e(X({username:c.user.displayName,profilePic:c.user.photoURL,id:c.user.uid}))})).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})})};var ge=function(){var e=Object(b.c)(ce),c=Object(b.b)();return Object(a.useEffect)((function(){Y.onAuthStateChanged((function(e){c(e?X({username:e.displayName,profilePic:e.photoURL,id:e.uid}):Z())}))}),[]),Object(v.jsx)("div",{className:"app",children:Object(v.jsx)(r.a,{children:e?Object(v.jsx)("div",{className:"app__body",children:Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/chats/view",children:Object(v.jsx)(Oe,{})}),Object(v.jsx)(o.a,{path:"/chats",children:Object(v.jsx)(he,{})}),Object(v.jsx)(o.a,{path:"/preview",children:Object(v.jsx)(ne,{})}),Object(v.jsx)(o.a,{exact:!0,path:"/",children:Object(v.jsx)(I,{})})]})}):Object(v.jsx)(xe,{})})})},ve=Object(m.a)({reducer:{app:ae,camera:g}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(b.a,{store:ve,children:Object(v.jsx)(ge,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,c,t){},78:function(e,c,t){},84:function(e,c,t){},90:function(e,c,t){}},[[110,1,2]]]);
//# sourceMappingURL=main.ccfb43f6.chunk.js.map